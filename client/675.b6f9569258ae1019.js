"use strict";(self.webpackChunkans_webapp=self.webpackChunkans_webapp||[]).push([[675],{6675:(J,p,i)=>{i.r(p),i.d(p,{LoginModule:()=>F});var c=i(1048),d=i(8773),s=i(9508);class m{}var n=i(9724),f=i(9725),C=i(3964);let x=(()=>{class t{constructor(o,e){this.http=o,this.urlService=e}login(o){const e=this.urlService.getUrl("/login");return this.http.post(e,o)}getUser(){const o=this.urlService.getUrl("/login/profile");return this.http.post(o,{})}register(o){const e=this.urlService.getUrl("/user/add");return this.http.post(e,o)}}return t.\u0275fac=function(o){return new(o||t)(n.LFG(f.eN),n.LFG(C.i))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i(965),M=i(2720),a=i(7082),h=i(5535),b=i(1521),_=i(4344),O=i(8238),z=i(8918);function P(t,r){1&t&&(n.ynx(0),n._uU(1,"\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a"),n.BQk())}function L(t,r){1&t&&n.YNc(0,P,2,0,"ng-container",15),2&t&&n.Q6J("ngIf",r.$implicit.hasError("required"))}function T(t,r){1&t&&(n.ynx(0),n._uU(1,"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),n.BQk())}function U(t,r){1&t&&n.YNc(0,T,2,0,"ng-container",15),2&t&&n.Q6J("ngIf",r.$implicit.hasError("required"))}let Z=(()=>{class t{constructor(o,e,l,g,u,S){this.fb=o,this.loginService=e,this.router=l,this.renderer=g,this.tokenService=u,this.messageService=S,this.loading=!1,this.scale=1,this.user=new m}onresize(o){let e=o.target.outerHeight/768;e>1.2&&(e=1.2),e<1&&(e=1),this.scale=e}ngOnInit(){}submit(){this.loginService.login(this.user).subscribe(o=>{0===o.msgCode&&(this.messageService.success("\u767b\u5f55\u6210\u529f"),this.saveToken(o.access_token),this.getUserInfo())})}saveToken(o){this.tokenService.token=o}getUserInfo(){this.loginService.getUser().subscribe(o=>{console.log(o),0===o.msgCode&&this.router.navigate(["/home"])})}getScale(){return{transform:`scale(${this.scale})`}}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(s.qu),n.Y36(x),n.Y36(d.F0),n.Y36(n.Qsj),n.Y36(v.B),n.Y36(M.dD))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],hostBindings:function(o,e){1&o&&n.NdJ("resize",function(g){return e.onresize(g)},!1,n.Jf7)},decls:32,vars:7,consts:[[1,"title-box"],[1,"icon"],["src","../../assets/login/logo.png",1,"logo"],[1,"title"],[1,"subtitle"],[1,"login-box",3,"ngStyle"],["nz-form",""],["form","ngForm"],["nzHasFeedback","",3,"nzErrorTip"],["nz-input","","name","UserName","required","",3,"ngModel","ngModelChange"],["UserNameTpl",""],["nz-input","","type","password","name","password","required","",3,"ngModel","ngModelChange"],["passwordTpl",""],["nz-button","","nzType","primary",3,"nzLoading","disabled","click"],[1,"version"],[4,"ngIf"]],template:function(o,e){if(1&o&&(n.TgZ(0,"div",0),n._UZ(1,"div",1)(2,"img",2),n.TgZ(3,"div",3),n._uU(4," \u540e\u53f0\u7ba1\u7406\u7cfb\u7edf "),n.qZA(),n.TgZ(5,"div",4),n._UZ(6,"div"),n.qZA()(),n.TgZ(7,"div",5)(8,"div",3),n._uU(9,"\u7528\u6237\u767b\u5f55 / User Login"),n.qZA(),n.TgZ(10,"form",6,7)(12,"nz-form-item")(13,"nz-form-label"),n._uU(14,"\u8d26\u53f7"),n.qZA(),n.TgZ(15,"nz-form-control",8)(16,"input",9),n.NdJ("ngModelChange",function(g){return e.user.username=g}),n.qZA(),n.YNc(17,L,1,1,"ng-template",null,10,n.W1O),n.qZA()(),n.TgZ(19,"nz-form-item")(20,"nz-form-label"),n._uU(21,"\u5bc6\u7801"),n.qZA(),n.TgZ(22,"nz-form-control",8)(23,"input",11),n.NdJ("ngModelChange",function(g){return e.user.password=g}),n.qZA(),n.YNc(24,U,1,1,"ng-template",null,12,n.W1O),n.qZA()()(),n.TgZ(26,"nz-form-item")(27,"nz-form-control")(28,"button",13),n.NdJ("click",function(){return e.submit()}),n._uU(29,"\u767b\u5f55"),n.qZA()()(),n.TgZ(30,"div",14),n._uU(31,"\u7248\u672c\u53f7: 1.0"),n.qZA()()),2&o){const l=n.MAs(11),g=n.MAs(18),u=n.MAs(25);n.xp6(7),n.Q6J("ngStyle",e.getScale()),n.xp6(8),n.Q6J("nzErrorTip",g),n.xp6(1),n.Q6J("ngModel",e.user.username),n.xp6(6),n.Q6J("nzErrorTip",u),n.xp6(1),n.Q6J("ngModel",e.user.password),n.xp6(5),n.Q6J("nzLoading",e.loading)("disabled",!l.form.valid)}},directives:[c.PC,s._Y,s.JL,s.F,a.Lr,h.SK,a.Nx,h.t3,a.iK,a.Fd,b.Zp,s.Fj,s.Q7,s.JJ,s.On,c.O5,_.ix,O.dQ,z.w],styles:["[_nghost-%COMP%]{display:block;height:100%;background-image:url(bg.f7a168172e86e188.png);background-position:center;background-repeat:no-repeat;background-size:cover;position:relative}[_nghost-%COMP%]   .title-box[_ngcontent-%COMP%]{position:absolute;top:54px;left:40px;padding-left:28px}[_nghost-%COMP%]   .title-box[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;left:0;top:10px;width:8px;height:20px;background-color:#fff;border-radius:4px}[_nghost-%COMP%]   .title-box[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:40px;vertical-align:top;margin-right:16px}[_nghost-%COMP%]   .title-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{height:40px;color:#fff;line-height:40px;font-size:36px;display:inline-block;font-weight:700}[_nghost-%COMP%]   .title-box[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{position:absolute;top:64px;width:143px;height:23px;overflow:hidden}[_nghost-%COMP%]   .title-box[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:relative;height:100%;background-position:center;background-repeat:no-repeat;background-size:cover;background-image:url(subtitle.950fdbb278652310.svg)}[_nghost-%COMP%]   .login-box[_ngcontent-%COMP%]{position:absolute;right:11%;top:50%;margin-top:-186px;width:356px;padding:36px 44px 40px;background-color:#fff;border-radius:4px;box-shadow:0 0 8px #4070ce94;transform-origin:right center}[_nghost-%COMP%]   .login-box[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:24px;color:#1890ff;text-align:center;height:24px;line-height:24px;margin-bottom:52px}[_nghost-%COMP%]   .login-box[_ngcontent-%COMP%]   .ant-row[_ngcontent-%COMP%]:nth-child(1){margin-bottom:28px}[_nghost-%COMP%]   .login-box[_ngcontent-%COMP%]   .ant-row[_ngcontent-%COMP%]:nth-child(2){margin-bottom:32px}[_nghost-%COMP%]   .login-box[_ngcontent-%COMP%]   [nz-form][_ngcontent-%COMP%]{max-width:600px}[_nghost-%COMP%]   .login-box[_ngcontent-%COMP%]   [nz-button][_ngcontent-%COMP%]{width:100%;height:43px;font-size:18px}[_nghost-%COMP%]   .login-box[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]{font-size:12px;color:#9e9e9e;height:12px;line-height:12px}"]}),t})();var A=i(2574);let F=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[c.ez,s.UX,A.G,s.u5,d.Bz.forChild([{path:"",component:Z},{path:"",pathMatch:"full",redirectTo:"login"}])]]}),t})()}}]);